{
  "variables": {
    "gce_project_id": "",
    "gce_zone": "europe-west1-b",
    "gce_source_image_project_id": "ubuntu-os-cloud",
    "gce_source_image_family": "ubuntu-minimal-2004-lts",
    "name": "remote-dev",
    "ssh_username": "2n3g5c9"
  },
  "builders": [
    {
      "type": "googlecompute",
      "project_id": "{{user `gce_project_id`}}",
      "zone": "{{user `gce_zone`}}",
      "network": "default",
      "source_image_project_id": "{{user `gce_source_image_project_id`}}",
      "source_image_family": "{{user `gce_source_image_family`}}",
      "ssh_username": "{{user `ssh_username`}}",
      "image_name": "packer-{{user `name`}}-{{timestamp}}",
      "image_description": "Ubuntu 20.04 LTS remote development server.",
      "image_family": "{{user `name`}}",
      "use_internal_ip": false,
      "scopes": [
        "https://www.googleapis.com/auth/userinfo.email",
        "https://www.googleapis.com/auth/compute",
        "https://www.googleapis.com/auth/devstorage.full_control"
      ],
      "tags": [
        "{{user `name`}}"
      ]
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline": [
	"sudo apt install -y git",
        "git clone https://github.com/2n3g5c9/remote-dev.git",
        "(cd ./remote-dev/bootstrap; ./bootstrap.sh)"
      ]
    }
  ]
}
